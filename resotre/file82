import {Action, Module, VuexModule} from "vuex-module-decorators";
import Store from "../../../Store";

export interface UserName {
    firstName: string;
    lastName: string;
}

export interface IUserState {
    user: IUserResponse;
    isLoading: boolean;
}

export interface IUserResponse {
    name: UserName;
    email: string;
    status: string;
}

@Module({
    dynamic: true,
    store: Store,
    name: 'UserModule',
    namespaced: true
})
class User extends VuexModule implements IUserState{
    user = {
        name: {firstName: '', lastName: ''},
        email:  '',
        status: '',
    }
    isLoading = false;

    private GET_USER_PROFILE(data: IUserResponse)
    {
        this.user = data;
    }


    @Action({rawError: true})
    public async getUserProfile(context) {
        const response = await API.getUserProfile();
        context.commit(GETTING_USER_PROFILE_SUCCESS, response.data);
        return Promise.resolve(response.data);
    }
}