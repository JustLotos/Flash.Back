<template>

</template>

<script>
    import {mapGetters} from 'vuex';
    import DeckListItem from "../../components/daemons/Deck/DeckListItem";
    import store from "../../../../store/store";
    import ListObjects from "../../components/common/ListObjects";
    import BaseLayout from "../../components/layout/BaseLayout";
    import DeckCreate from "../../components/daemons/Deck/DeckCreate";
    import SuccessModal from "../../components/common/Modals/SuccessModal";

    export default {
        name: 'DeckList',
        components: {SuccessModal, DeckCreate, BaseLayout, ListObjects, DeckListItem},
        data: function() {
            return {
                createModal: false,
                successModal: false,
                successMessage: '',
            }
        },
        computed: {
            ...mapGetters('DeckStore', [
                'decks',
                'decksId'
            ]),
            createModalBtnPlacement: function() {
                let empty = !!this.decksId && !!this.decksId.length;
                return {
                    'on-side': empty,
                    'on-card': !empty
                }
            }
        },
        methods: {
            createModalToggle: function() {
                this.createModal = !this.createModal;
            },
            handleSuccessCreate: function(value) {
                this.successMessage = value;
                this.successModal = !this.successModal;
            },
        },
        beforeRouteEnter: async function (to , from , next) {
            await store.dispatch('DeckStore/getAll')
                .then(()=>{next()})
                .catch((error)=>{console.log("Ошибка извелчения колоды" + JSON.parse(error));});
        }
    }
</script>

<style scoped>

</style>